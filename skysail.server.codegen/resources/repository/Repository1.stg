Repository1(repo, linkedClasses, imports) ::= <<
package xxxx$repo.packageName$;

import java.util.List;

$imports$

import aQute.bnd.annotation.component.Activate;
import aQute.bnd.annotation.component.Component;
import aQute.bnd.annotation.component.Deactivate;
import aQute.bnd.annotation.component.Reference;

import io.skysail.server.db.DbService;

@Component(immediate=true)
public class $repo.typeName$ {

	private static $repo.typeName$ instance;

	private DbService dbService;

	public static $repo.typeName$ getInstance() {
		// for tests
		if (instance == null) {
			instance = new $repo.typeName$();
		}
	    return instance;
    }

	@Activate
	public void activate() {
		$repo.typeName$.instance = this;
	}

	@Deactivate
	public void deactivate() {
		$repo.typeName$.instance = null;
	}

	@Reference
	public void setDbService(DbService dbService) {
		this.dbService = dbService;
	}

	public void unsetDbService(@SuppressWarnings("unused") DbService dbService) {
		this.dbService = null;
	}

	public $repo.entityName$ add($repo.entityName$ entity) {
		return dbService.persist(entity);
    }

	public List<$repo.entityName$> get$repo.entityName$s() {
	    return dbService.findAll($repo.entityName$.class$linkedClasses$);
    }

	public $repo.entityName$ getById(String id) {
	    return dbService.find(id);
    }

	public void update($repo.entityName$ entity) {
		dbService.update(entity);
    }

    public void delete(String id) {
        dbService.delete(id);
    }


}
>>